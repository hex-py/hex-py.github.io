---
title: shell基础之EOF的用法
categories:
  - Bash
tags:
  - Bash
date: '2021-01-14 07:25:14'
top: false
comments: true
---
# 重要

# 1.简介

EOF是（END Of File）的缩写，表示自定义终止符。既然自定义，那么EOF就不是固定的，可以随意设置别名，在linux按ctrl-d 就代表EOF。

EOF一般会配合cat能够多行文本输出。

# 2. 用法说明
其用法如下：
```bash
<<EOF        #开始
....         #输入内容
EOF          #结束
```

还可以自定义，比如自定义：
```bash
#开始
<<ABC        
....
# 结束
ABC
```

通过cat配合重定向能够生成文件并追加操作，在它之前先熟悉几个特殊符号
`<`:  输入重定向
`>`:  输出重定向
`>>`: 输出重定向,进行追加,不会覆盖之前内容
`<<`: 标准输入来自命令行的一对分隔号的中间内容

例子1：
```bash
cat <<EOF
hello
EOF
```
输出为：
```bash
hello
```

我们知道cat的操作对象是文件，但是例1中cat的操作对象不是文件，而是用户输入；那么我们可以这样理解例1：先在文件file中输入“Hello”，再用cat file输出其中的内容。
也就是说我们可以用一个文件来替代"<< EOF EOF"。

反过来说，如果操作命令中的文件是输入对象，也可以用"<< EOF EOF"来替代的。

例子2：
```bash
# 1. 创建1.txt文件，文件中有字段`abc`
echo "abc" > 1.txt

# 2. 向文件1.txt输入覆盖内容（也可以：cat > 1.txt <<EOF）
cat <<EOF > 1.txt 
11
aa
bb
lol
EOF

# "<< EOF EOF" 的作用是在命令执行过程中用户自定义输入，它类似于起到一个临时文件的作用，只是比使用文件更方便灵活。
```

# 3. `cat <<EOF` 与 `cat <<-EOF` 的区别
两个都是获取stdin，并在EOF处结束stdin，输出stdout。

使用`cat <<EOF`时，输入完成后，需要在一个新的一行输入EOF结束stdin的输入。EOF必须顶行写，前面不能用制表符或者空格。
使用`cat <<-EOF`时，分界符（EOF）所在行的开头部分的制表符（Tab）都将被去除。这可以解决由于脚本中的自然缩进产生的制表符。

如果结束分解符EOF前有制表符或者空格，则EOF不会被当做结束分界符，只会继续被当做stdin来输入。所以会报如下报错
```log
2.sh: line 5: warning: here-document at line 1 delimited by end-of-file (wanted `EOF')
```
脚本内容如下：
```bash
#!/bin/bash

cat <<EOF
你好，EOF！
EOF
```
正确写法如下 - 2种：
```bash
# 虽然最后的EOF前面有多个制表符和空格，但仍然会被当做结束分界符，表示stdin的结束。
#!/bin/bash

cat <<EOF

你好，EOF！

EOF
```

```bash
#!/bin/bash

# 虽然最后的EOF前面有多个制表符和空格，但仍然会被当做结束分界符，表示stdin的结束。
cat <<-EOF

你好，EOF！

      EOF
```
